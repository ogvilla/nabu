<!--
///////////////////////////////////////////////////////////////////////////
//  Copyright 2015 - 2020 Sabrina Prestigiacomo nabu@nabu.pt
//
//  This program is free software: you can redistribute it and/or modify
//  it under the terms of the GNU General Public License as published by
//  the Free Software Foundation, either version 3 of the License, or
//  any later version.
//  
//  This program is distributed in the hope that it will be useful,
//  but WITHOUT ANY WARRANTY; without even the implied warranty of
//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
//  GNU General Public License for more details.
//  
//  You should have received a copy of the GNU General Public License
//  along with this program.  If not, see <http://www.gnu.org/licenses/>.
//  
///////////////////////////////////////////////////////////////////////////
-->


<!DOCTYPE html>
<meta charset="utf-8">
<html>
<head>
    <title>Nab&uacute</title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
    <script src="js/jquery-3.2.1.min.js"></script>
    <script src="js/d3.min.js"></script>
    <script src="js/arbol.js"></script>
    <script src="js/main.js"></script>
    <script src="js/util.js"></script>
    <script src="js/decidimos.js"></script>
    <script src="js/aprendemos.js"></script>
    <script src="js/common.js"></script>
    <script src="js/tween.min.js"></script>
    <script src="js/dictionary.js"></script>
    <link rel="stylesheet" type="text/css" href="styles.css">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <meta name="description" content="Herramienta para la toma de decisiones democraticas en grandes grupos cooperativos">
    <meta name="robots" content="index,follow">
    <meta name="keywords" content="democracia directa,democracia interactiva,democracia participativa,generador de consensos,cooperativa 2.0,cooperativa integral catalana" />
</head>
<body onload="doLoad();" style="overflow:hidden"  onresize="resize()">

    <!--grupos--------------------------------------------------------------------------------------------------->
    <div id="grupos" style="visibility:hidden;position:absolute; width: 800px; height: 500px; text-align:center;overflow:auto"></div>

    <!--login--------------------------------------------------------------------------------------------------->
    <div id="loginGrupo" class="titulo0" style="visibility:hidden;position:absolute; width: 400px; height: 200px; text-align:center;"></div>
    <img id="loginFlor" src="res/logo.png" style="visibility:hidden; position:absolute;cursor:pointer" onclick="document.location='default.html';"/>
    <div id="loginIn" class="ventana" style="visibility:hidden;position:absolute; width: 400px; height: 200px; text-align:center;">
        <a href="help.html" target="_blank" style="color:black;text-decoration:none;">
            <span class="titulo1" style="cursor: pointer;"><font color="blue" size="2">[?]</font>Nab&uacute;</span>
        </a><br />
        <span id="tit1" class="titulo3">Democracia interactiva</span><br />
        <input id="email" type="text" class="txt" placeholder="email" value="" /><br />
        <input id="clave" type="password" class="txt" placeholder="clave" value=""/><br />
        <input id="btnEntrar" type="button" class="btn" value="Entrar" onclick="doLogin();" /><br />
        <div id="loginResponse">&nbsp;</div>
        <div id="loginAltaUsuario" onclick="doAltaUsuario();" style="color:blue; cursor: pointer;">Alta de usuario</div>
    </div>
    <div id="tip" class="tip" style="visibility:hidden;position:absolute; text-align:center; display: table-cell; vertical-align: middle"></div>

    <!--modelos documento--------------------------------------------------------------------------------------------------->
    <div id="modelos" class="center" style="visibility: hidden;" >
        <div class="ventana" style="text-align:center;">
            <div id="modelosContent"></div>
            <input id="btnCancelar" type="button" value="Cancelar" class="btn" onclick="document.getElementById('modelos').style.visibility = 'hidden';" style="margin: 0 auto;" />
        </div>             
    </div>

    <!--modelos evaluacion--------------------------------------------------------------------------------------------------->
    <div id="modelosEvaluacion" class="center" style="visibility: hidden;" >
        <div class="ventana" style="text-align:center;">
            <div style="text-align:center" class="titulo1">Modelos de evaluacion</div>
            <div id="modelosEvaluacionContent"></div>
            <input type="button" value="Cancelar" class="btn" onclick="document.getElementById('modelosEvaluacion').style.visibility = 'hidden';" style="margin: 0 auto;" />
        </div>             
    </div>

    <!--objetivo--------------------------------------------------------cr------------------------------------------->
    <div id="objetivo" class="objetivo"></div>

    <!--pie--------------------------------------------------------------------------------------------------->
    <div id="pie" style="padding: 5px; position: absolute; font-size: 10px; visibility: hidden;">
        <a id="lnkSim" href="simulacion.html">simulacion</a> - 
        <a href="http://cooperativa.cat" target="_blank">CIC</a> - 
        01/11/2015 - 
        <a href="mailto:nabu@nabu.pt">nabu@nabu.pt</a> - 
        <span id="mejorVisto">Mejor visto en</span>&nbsp;<a target="_blank" href="https://www.google.com/chrome/browser/desktop/index.html">Google Chrome</a> -
        <span id="version" style="color:red">versi&oacute;n beta</span> - 
        <a id="lnkAyuda" href="javascript:doOpen('help.html');">Ayuda</a> -
        <a href="https://github.com/sabtvg/nabu" target="_blank">fork me</a>
    </div>

    <!--no soportado--------------------------------------------------------------------------------------------------->
    <div id="noSoportado" style="visibility: hidden; position: absolute; top: 30px; left:30px;">
        <div class="ventana">
            <table>
                <tr>
                    <td>
                        <img src="res/icono2.png" />
                    </td>
                    <td id="noSoportadoMsg" class="titulo3">
                        Nab&uacute; no puede mostrarse<br /> en este navegador
                    </td>
                </tr>
            </table>
        </div>
    </div>

    <!--node options--------------------------------------------------------------------------------------------------->
    <div id="menuNode" class="menu">
        <table>
            <tr>  
                <td class="menu2">
                    <img class="btnimg" title="ver documento" src="res/documento.png" onclick="doVerDocumento();" />
                    <img class="btnimg" title="poner/quitar flor" src="res/quitarflor.png" onclick="doToggleFlor();" />
                </td>
            </tr>
        </table>
    </div>

    <!--joystick--------------------------------------------------------------------------------------------------->
    <div id="joystickQueso" style="visibility:hidden; padding: 5px; text-align:right; position: absolute; left:10px; top:0px;">
        <table>
            <tr>
                <td><img src="res/jzm.png" style='cursor:pointer;' onclick="quesoScale*=1.1;dibujarQueso();"  /></td>
                <td><img src="res/ju.png" style='cursor:pointer;' onmousedown="quesoy-=5;dibujarQueso();" /></td>
                <td></td>
            </tr>
            <tr>
                <td><img src="res/jl.png" style='cursor:pointer;' onmousedown="quesox-=5;dibujarQueso();" /></td>
                <td><img src="res/j00.png" style='cursor:pointer;' onclick="translateQueso(quesox = 0, quesoy = 0)" /></td>
                <td><img src="res/jr.png" style='cursor:pointer;' onmousedown="quesox+=5;dibujarQueso();" /></td>
            </tr>
            <tr>
                <td><img src="res/jzl.png" style='cursor:pointer;' onclick="quesoScale*=0.9;dibujarQueso();" /></td>
                <td><img src="res/jd.png" style='cursor:pointer;' onmousedown="quesoy+=5;dibujarQueso();"  /></td>
                <td></td>
            </tr>
        </table>
    </div>

    <!--joystick--------------------------------------------------------------------------------------------------->
    <div id="joystickArbol" style="visibility:hidden; padding: 5px; text-align:right; position: absolute; left:10px; top:0px;">
        <table>
            <tr>
                <td><img src="res/jzm.png" style='cursor:pointer;' onclick="zoom(10);"  /></td>
                <td><img src="res/ju.png" style='cursor:pointer;' onmousedown="pany(-5);" onmouseup="clearInterval(joyInterval);" /></td>
                <td></td>
            </tr>
            <tr>
                <td><img src="res/jl.png" style='cursor:pointer;' onmousedown="panx(-5);" onmouseup="clearInterval(joyInterval);" /></td>
                <td><img src="res/j00.png" style='cursor:pointer;' onclick="translateArbol(translatex = 0, translatey = 0)" /></td>
                <td><img src="res/jr.png" style='cursor:pointer;' onmousedown="panx(5);" onmouseup="clearInterval(joyInterval);" /></td>
            </tr>
            <tr>
                <td><img src="res/jzl.png" style='cursor:pointer;' onclick="zoom(-10);" /></td>
                <td><img src="res/jd.png" style='cursor:pointer;' onmousedown="pany(5);" onmouseup="clearInterval(joyInterval);" /></td>
                <td></td>
            </tr>
        </table>
    </div>

    <!--timePanel--------------------------------------------------------------------------------------------------->
    <div id="timePanel"  style="visibility:hidden; position: absolute; left:10px; top:0px;opacity:1">
        <table style="border-collapse: collapse; border-spacing: 0;">
            <tr>
                <td><img src="res/timemas.png" style='cursor:pointer;text-align:center;margin:0px;' onclick="historicoFecha.setDate(historicoFecha.getDate() + 1);showTimePanel();"  /></td>
                <td></td>
                <td><img src="res/timemas.png" style='cursor:pointer;text-align:center;margin:0px;' onclick="historicoFecha.setMonth(historicoFecha.getMonth() + 1);showTimePanel();"/></td>
                <td></td>
                <td></td>
                <td rowspan="3" style="vertical-align:middle;"><img src="res/timepresent.png" style='cursor:pointer;margin:0px'  onclick="doTimePresent();"/></td>
            </tr>
            <tr>
                <td id="timeDia" style="font-size:18px;text-align:center">00</td>
                <td style="font-size:18px;text-align:center">/</td>
                <td id="timeMes" style="font-size:18px;text-align:center">00</td>
                <td style="font-size:18px;text-align:center">/</td>
                <td id="timeYear" style="font-size:18px;text-align:center">2018</td>
            </tr>
            <tr>
                <td><img src="res/timemenos.png" style='cursor:pointer;text-align:center;margin:0px;' onclick="historicoFecha.setDate(historicoFecha.getDate() - 1);showTimePanel();"  /></td>
                <td></td>
                <td><img src="res/timemenos.png" style='cursor:pointer;text-align:center;margin:0px;' onclick="historicoFecha.setMonth(historicoFecha.getMonth() - 1);showTimePanel();"/></td>
                <td></td>
                <td></td>
            </tr>
        </table>
    </div>
    <img id="timeBack" src="res/timeback.png" onclick="doTimeBack();"  style="cursor:pointer;visibility:hidden; padding: 5px; position: absolute; left:10px; top:0px;opacity:0.4" />
           
    <!--titulo--------------------------------------------------------------------------------------------------->
    <div id="titulo" style="visibility:hidden; padding: 10px; width: 250px; text-align:right; position: absolute; left:0px; top:0px;">
        <a href="help.html" target="_blank" style="color:black;text-decoration:none;">
            <div id="titulo0" class="titulo0" style="cursor: pointer;"><font color="blue" size="2">[?]</font><nobr>Nab&uacute;</nobr></div>
        </a>
        <div id="titulo1" class="titulo1"><nobr>Sociocracia</nobr></div>
        <div id="titulo2" class="titulo2"><nobr>Democracia interactiva</nobr></div>
        <div id="mnuOptions" class="titulo3"></div>
        <div id="msgDiv" class="msg"></div>
    </div>

    <!--panel consenso--------------------------------------------------------------------------------------------------->
    <div id="panelConsenso"  class="borde" style="visibility:hidden; padding: 5px; position: absolute; left:10px; top:210px; color: gray; border: 1px solid gray; margin: 0px;">
    </div>

    <!--panel grupo--------------------------------------------------------------------------------------------------->
    <div id="panelGrupo"  class="borde" style="visibility:hidden; padding: 5px; position: absolute; left:10px; top:210px; color: gray; border: 1px solid gray; margin: 0px;">
    </div>

    <!--panel grupo--------------------------------------------------------------------------------------------------->
    <div id="panelQueso"  class="borde" style="visibility:hidden; padding: 5px; position: absolute; left:10px; top:210px; color: gray; border: 1px solid gray; margin: 0px;">
    </div>

    <!--menuppal--------------------------------------------------------------------------------------------------->
    <div id="menuppal" style="position: absolute; visibility:hidden; width: 800px; height: 600px;">
        <div id="padrenombre" style="position: inherit; width:800px; left:0px; top:-100px;text-align: center;" class="titulo1"></div>
        <div id="tituloppal" style="position: inherit; width:800px; left:0px; top:-70px;text-align: center;" class="titulo0"></div>
        <img id="ciclo" class="btnimg" src="res/ciclo.png" style="position: inherit; left:159px; top:47px;;cursor:default" />
        <img id="ppal1" class="btnimg" src="res/es/debates.png" style="position: inherit; left:15px; top:145px;" onclick="doDecidimos();"/>
        <img id="ppal2" class="btnimg" src="res/es/noticias.png" style="position: inherit; left:15px; top:192px;" onclick="doAprendemos();"/>
        <img id="ppal3" class="btnimg" src="res/es/estructuras.png" style="position: inherit; left:600px; top:242px;" onclick="doEstructuras();"/>
        <img id="ppal4" class="btnimg" src="res/es/seguimiento.png" style="position: inherit; left:600px; top:329px;" onclick="doSeguimiento();"/>
        <img id="ppal5" class="btnimg" src="res/es/docConsensos.png" style="position: inherit; left:338px; top:31px;" onclick="doDecisiones();"/>
        <img id="ppal7" class="btnimg" src="res/es/docRealizacion.png" style="position: inherit; left:285px; top:439px;" onclick="doResultados();"/>
        <img id="ppal8" class="btnimg" src="res/es/manifiesto.png" style="position: inherit; left:190px; top:278px;"/>
        <img id="ppal9" class="btnimg" src="res/doc.png" style="position: inherit; left:120px; top:258px;" onclick="doManifiesto();"/>
        <img id="ppal10" class="btnimg" src="res/es/politico.png" style="position: inherit; left:190px; top:278px;cursor:default;"/>
        <img id="ppal11" class="btnimg" src="res/es/operativo.png" style="position: inherit; left:120px; top:258px;cursor:default" />
        <div id="hijos" style="position: inherit; width:800px; left:0px; top:480px;text-align: center;" class="titulo1"></div>
    </div>

    <!--atras--------------------------------------------------------------------------------------------------->
    <img id="atras" class="btnimg" title="Atras" src="res/atras.png" style="visibility:hidden; position: absolute; left:10px; top:10px;" onclick="doAtras();" />

    <!--aprendemos--------------------------------------------------------------------------------------------------->
    <div id="quesoDiv" style="left: 0px; top: 0px; width:100%; height:100%"></div>


    <!--panel flores--------------------------------------------------------------------------------------------------->
    <div id="panelUsuario" style="visibility: hidden; position: absolute; left: 10px; top: 120px;">
        <table>
            <tr>
                <td id="usuario" colspan="2" style="font-size: 25px; font-weight: bold;"></td>
            </tr>
            <tr>
                <td style="width: 25px;"><img src="res/icono2.png" /></td>
                <td id="floresDisponibles" style="font-size: 25px; font-weight: bold;">5</td>
            </tr>
        </table>      
    </div>

    <!--cambiar clave--------------------------------------------------------------------------------------------------->
    <div id="cambiarClave" class="ventana" style="position: absolute; width: 230px; text-align:center; visibility: hidden;">
        <span class="titulo2">Cambio de clave</span><br />
        <input id="oldPass" type="password" class="editar" placeholder="Clave actual" value="" /><br />
        <input id="newPass" type="password" class="editar" placeholder="Nueva clave" value=""/><br />
        <input id="repeat" type="password" class="editar" placeholder="Repitela" value=""/><br />
        <input id="btnCCCambiar" type="button" class="btn" value="Cambiar" onclick="doCambiarClave();" />
        <input id="btnCCCancelar" type="button" class="btn" value="Cancelar" onclick="doHideCambiarClave();" /><br />
        <div id="cambiarClaveMsg"></div>
    </div>

    <!--alta usuario--------------------------------------------------------------------------------------------------->
    <div id="altaUsuario" class="ventana" style="position: absolute; width: 330px; height: 330px; text-align:center; visibility: hidden; opacity: 1;">
        <span id="auTit1" class="titulo2">Alta de usuario</span>
        <span id="auTit2">
        <br /><br />
        El alta de usuarios es administrada manualmente.<br /><br />
        Selecciona el grupo<br /> y completa tus datos.<br />
        Recibiras un email con tus datos de acceso.<br /><br />
        </span>
        <select id="altaUsuarioGrupos" class="editar" style="width: 200px;"></select><br />
        <input id="altaUsuarioNombre" type="text" class="editar" placeholder="Nombre completo" value="" /><br />
        <input id="altaUsuarioEmail" type="text" class="editar" placeholder="Email" value="" /><br />
        <input id="auEnviar" type="button" class="btn" value="Enviar solicitud" onclick="doAltaUsuarioEnviar();" />
        <input id="auCerrar" type="button" class="btn" value="Cerrar" onclick="efectoTop(document.getElementById('altaUsuario'), 0, window.innerHeight / 2 - 330 / 2, -380, TWEEN.Easing.Cubic.Out);" /><br />
        <div id="altaUsuarioMsg"></div>
    </div>
        
    <!--lista consensos--------------------------------------------------------------------------------------------------->
    <div id="panelListaConsensos" style="visibility: hidden;position:absolute;width:1024px;overflow-x:auto;" >
    </div>

    <!--panel--------------------------------------------------------------------------------------------------->
    <div id="panelDer" class="panel" style="visibility: hidden;">
        <table style="width: 95%;">
            <tr>
                <td style="text-align: right;"><img id="Img1" style="cursor: pointer;" src="res/close.png" onclick="hidePanelDer();" /></td>
            </tr>
            <tr>
                <td id="panelDer2">
                </td>
            </tr>
        </table>
    </div>
    <div id="panelIzq" class="panel" style="visibility: hidden;">
        <table style="width: 95%;">
            <tr>
                <td style="text-align: right;"><img id="Img2" style="cursor: pointer;" src="res/close.png" onclick="hidePanelIzq();" /></td>
            </tr>
            <tr>
                <td id="panelIzq2">
                </td>
            </tr>
        </table>
    </div>

    <!--florwait--------------------------------------------------------------------------------------------------->
    <img id="florWait" src="res/florWait.gif" style="visibility: hidden;position:absolute;" />

    <!--confirmar quitar ultima flor--------------------------------------------------------------------------------------------------->
    <div id="ultimaFlor" style="visibility: hidden;position:absolute;width:300px;" >
        <div class="ventana" style="text-align:center;">
            <span id="ufTit1" class="titulo2">Si quitas la &uacute;ltima flor la propuesta dejar&aacute; de existir</span><br /><br />
            <input id="ufAceptar" type="button" value="Aceptar" class="btn" onclick="document.getElementById('ultimaFlor').style.visibility = 'Hidden'; doToggleFlor2();" />
            <input id="ufCancelar" type="button" value="Cancelar" class="btn" onclick="document.getElementById('ultimaFlor').style.visibility = 'Hidden';" />
        </div>             
    </div>

    <!--node options--------------------------------------------------------------------------------------------------->
    <div id="menuEvaluacion" class="menu">
        <table>
            <tr>  
                <td class="menu2">
                    <img class="btnimg" title="Crear evaluacion" src="res/documento.png" onclick="seleccionarModeloEvaluacion();" />
                </td>
            </tr>
        </table>
    </div>

    <!--documento--------------------------------------------------------------------------------------------------->
    <div id="documento" class="documento" style="top: -1000px;">
    </div>

    <!--help--------------------------------------------------------------------------------------------------->
    <div id="help" class="documento" style="opacity: 1; width: 800px; height: 650px;">
        <table style="width: 100%;">
            <tr><td style="text-align: right;"><img style="cursor: pointer;" src="res/close.png" onclick="doCloseHelp();" /></td></tr>
            <tr><td id="helpContent"></td></tr>
        </table>
    </div>
</body>
</html>